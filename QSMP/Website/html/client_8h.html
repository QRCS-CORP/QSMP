<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QSMP: Quantum Secure Messaging Protocol: C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/QSMP/QSMP/client.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="qsmp_extra_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QSMP: Quantum Secure Messaging Protocol<span id="projectnumber">&#160;1.3.0.0a (A3)</span>
   </div>
   <div id="projectbrief">A quantum secure encrypted tunneling protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('client_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">client.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>QSMP Client Functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="qsmp_8h_source.html">qsmp.h</a>&quot;</code><br />
<code>#include &quot;../../QSC/QSC/rcs.h&quot;</code><br />
<code>#include &quot;../../QSC/QSC/socketclient.h&quot;</code><br />
</div>
<p><a href="client_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3e33326ae871a40836648db31902875d" id="r_a3e33326ae871a40836648db31902875d"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e33326ae871a40836648db31902875d">qsmp_duplex_send_symmetric_ratchet_request</a> (<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *cns)</td></tr>
<tr class="memdesc:a3e33326ae871a40836648db31902875d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a symmetric key-ratchet request to the remote host.  <br /></td></tr>
<tr class="separator:a3e33326ae871a40836648db31902875d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02e20e6f3a5687fcce9c86cb5e050c6" id="r_ac02e20e6f3a5687fcce9c86cb5e050c6"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac02e20e6f3a5687fcce9c86cb5e050c6">qsmp_client_duplex_connect_ipv4</a> (const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *kset, const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *rverkey, const qsc_ipinfo_ipv4_address *address, uint16_t port, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t))</td></tr>
<tr class="memdesc:ac02e20e6f3a5687fcce9c86cb5e050c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a remote host over IPv4 and perform the Duplex key exchange.  <br /></td></tr>
<tr class="separator:ac02e20e6f3a5687fcce9c86cb5e050c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6636b873b7aa9b74a39e809eafc0b9a7" id="r_a6636b873b7aa9b74a39e809eafc0b9a7"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6636b873b7aa9b74a39e809eafc0b9a7">qsmp_client_duplex_connect_ipv6</a> (const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *kset, const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *rverkey, const qsc_ipinfo_ipv6_address *address, uint16_t port, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t))</td></tr>
<tr class="memdesc:a6636b873b7aa9b74a39e809eafc0b9a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a remote host over IPv6 and perform the Duplex key exchange.  <br /></td></tr>
<tr class="separator:a6636b873b7aa9b74a39e809eafc0b9a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5989e03fa79c662c5b7a9feff38d650" id="r_ab5989e03fa79c662c5b7a9feff38d650"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5989e03fa79c662c5b7a9feff38d650">qsmp_client_simplex_connect_ipv4</a> (const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *pubk, const qsc_ipinfo_ipv4_address *address, uint16_t port, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t))</td></tr>
<tr class="memdesc:ab5989e03fa79c662c5b7a9feff38d650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a remote server over IPv4 and perform the Simplex key exchange.  <br /></td></tr>
<tr class="separator:ab5989e03fa79c662c5b7a9feff38d650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1dceb27d9321c795569dcc5b114f10a" id="r_ad1dceb27d9321c795569dcc5b114f10a"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1dceb27d9321c795569dcc5b114f10a">qsmp_client_simplex_connect_ipv6</a> (const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *pubk, const qsc_ipinfo_ipv6_address *address, uint16_t port, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t))</td></tr>
<tr class="memdesc:ad1dceb27d9321c795569dcc5b114f10a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a remote server over IPv6 and perform the Simplex key exchange.  <br /></td></tr>
<tr class="separator:ad1dceb27d9321c795569dcc5b114f10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac451d696879717d76829599a9e1cb98e" id="r_ac451d696879717d76829599a9e1cb98e"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac451d696879717d76829599a9e1cb98e">qsmp_client_simplex_listen_ipv4</a> (const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *kset, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t))</td></tr>
<tr class="memdesc:ac451d696879717d76829599a9e1cb98e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the server in Simplex mode over IPv4 and listen for client connections.  <br /></td></tr>
<tr class="separator:ac451d696879717d76829599a9e1cb98e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a443dbe43db63e33f4dd514fa5d063e52" id="r_a443dbe43db63e33f4dd514fa5d063e52"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a443dbe43db63e33f4dd514fa5d063e52">qsmp_client_simplex_listen_ipv6</a> (const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *kset, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t))</td></tr>
<tr class="memdesc:a443dbe43db63e33f4dd514fa5d063e52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the server in Simplex mode over IPv6 and listen for client connections.  <br /></td></tr>
<tr class="separator:a443dbe43db63e33f4dd514fa5d063e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d2e98886f6df2779ba132ab1f6516b" id="r_a06d2e98886f6df2779ba132ab1f6516b"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06d2e98886f6df2779ba132ab1f6516b">qsmp_client_duplex_listen_ipv4</a> (const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *kset, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t), bool(*key_query)(uint8_t *rvkey, const uint8_t *pkid))</td></tr>
<tr class="memdesc:a06d2e98886f6df2779ba132ab1f6516b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the server in Duplex mode over IPv4 and listen for a single host-to-host connection.  <br /></td></tr>
<tr class="separator:a06d2e98886f6df2779ba132ab1f6516b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4234204f2e435b03bc24058eb3e0967b" id="r_a4234204f2e435b03bc24058eb3e0967b"><td class="memItemLeft" align="right" valign="top">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4234204f2e435b03bc24058eb3e0967b">qsmp_client_duplex_listen_ipv6</a> (const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *kset, void(*send_func)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), void(*receive_callback)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t), bool(*key_query)(uint8_t *rvkey, const uint8_t *pkid))</td></tr>
<tr class="memdesc:a4234204f2e435b03bc24058eb3e0967b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the server in Duplex mode over IPv6 and listen for a single host-to-host connection.  <br /></td></tr>
<tr class="separator:a4234204f2e435b03bc24058eb3e0967b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>QSMP Client Functions. </p>
<p>This header file defines the client-side functions for the Quantum Secure Messaging Protocol (QSMP). QSMP is a post-quantum secure messaging protocol that supports both Duplex and Simplex key exchange mechanisms over IPv4 and IPv6 networks. These functions enable QSMP clients to initiate secure connections, perform key exchanges, and manage cryptographic ratchet operations during an active session.</p>
<p>The QSMP client functionality provided in this header includes:</p>
<ul>
<li><b>Key Ratchet Requests:</b><ul>
<li><b>Asymmetric Key Ratchet Request:</b> (conditionally available when QSMP_ASYMMETRIC_RATCHET is defined) Initiates an asymmetric key ratchet to update session keys using asymmetric cryptographic operations, thereby enhancing forward secrecy.</li>
<li><b>Symmetric Key Ratchet Request:</b> Initiates a symmetric key ratchet that updates the session keys using symmetric operations.</li>
</ul>
</li>
<li><b>Duplex Key Exchange Connections:</b><ul>
<li>Establishes secure, bi-directional (mutually authenticated) communication channels using the Duplex protocol.</li>
<li>Supports connection establishment over both IPv4 and IPv6.</li>
</ul>
</li>
<li><b>Simplex Key Exchange Connections:</b><ul>
<li>Establishes unidirectional secure connections (where the client typically verifies the server's identity) using the Simplex protocol.</li>
<li>Supports connection establishment over both IPv4 and IPv6.</li>
</ul>
</li>
<li><b>Listener Functions:</b><ul>
<li>Functions that start a network listener (acting as a server) to accept incoming connections and perform either the Simplex or Duplex key exchange protocols. In Duplex mode, an additional key query callback is provided to identify the correct public key based on a given identifier.</li>
</ul>
</li>
</ul>
<p>All connection functions accept callback functions for sending and receiving data over the QSMP connection, and they return a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> to indicate the success or failure of the operation.</p>
<dl class="section note"><dt>Note</dt><dd>This header file does not include any internal test functions. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac02e20e6f3a5687fcce9c86cb5e050c6" name="ac02e20e6f3a5687fcce9c86cb5e050c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac02e20e6f3a5687fcce9c86cb5e050c6">&#9670;&#160;</a></span>qsmp_client_duplex_connect_ipv4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_duplex_connect_ipv4 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *</td>          <td class="paramname"><span class="paramname"><em>rverkey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qsc_ipinfo_ipv4_address *</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a remote host over IPv4 and perform the Duplex key exchange. </p>
<p>This function establishes a connection to a remote host using its IPv4 address and initiates the Duplex key exchange protocol. The Duplex protocol enables mutual authentication and a bidirectional key exchange, setting up a secure two-way communication channel. Upon successful connection, the provided callback functions handle message transmission and reception.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kset</td><td>[const] A pointer to the client's private signature key used for signing messages. </td></tr>
    <tr><td class="paramname">rverkey</td><td>[const] A pointer to the remote client's public signature verification key used for validating signatures. </td></tr>
    <tr><td class="paramname">address</td><td>[const] A pointer to the IPv4 address information structure of the remote server. </td></tr>
    <tr><td class="paramname">port</td><td>The QSMP application port number (typically defined by QSMP_CLIENT_PORT). </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function responsible for transmitting messages. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function used to process incoming data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> indicating the success or failure of the connection and key exchange. </dd></dl>

</div>
</div>
<a id="a6636b873b7aa9b74a39e809eafc0b9a7" name="a6636b873b7aa9b74a39e809eafc0b9a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6636b873b7aa9b74a39e809eafc0b9a7">&#9670;&#160;</a></span>qsmp_client_duplex_connect_ipv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_duplex_connect_ipv6 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *</td>          <td class="paramname"><span class="paramname"><em>rverkey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qsc_ipinfo_ipv6_address *</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a remote host over IPv6 and perform the Duplex key exchange. </p>
<p>This function establishes a connection to a remote host using its IPv6 address and initiates the Duplex key exchange protocol. The Duplex protocol provides mutual authentication and secure bidirectional communication. Upon connection, the designated callback functions are invoked to manage the data transmission and reception.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kset</td><td>[const] A pointer to the client's private signature key used for signing messages. </td></tr>
    <tr><td class="paramname">rverkey</td><td>[const] A pointer to the remote client's public signature verification key. </td></tr>
    <tr><td class="paramname">address</td><td>[const] A pointer to the IPv6 address information structure of the remote server. </td></tr>
    <tr><td class="paramname">port</td><td>The QSMP application port number (typically defined by QSMP_CLIENT_PORT). </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function responsible for message transmission. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function used to process incoming data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> indicating the result of the connection and key exchange operation. </dd></dl>

</div>
</div>
<a id="a06d2e98886f6df2779ba132ab1f6516b" name="a06d2e98886f6df2779ba132ab1f6516b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d2e98886f6df2779ba132ab1f6516b">&#9670;&#160;</a></span>qsmp_client_duplex_listen_ipv4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_duplex_listen_ipv4 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool(*</td>          <td class="paramname"><span class="paramname"><em>key_query&#160;</em></span>)(uint8_t *rvkey, const uint8_t *pkid)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the server in Duplex mode over IPv4 and listen for a single host-to-host connection. </p>
<p>This function initiates a network listener on the IPv4 interface to accept an incoming connection for the Duplex key exchange. The Duplex protocol facilitates mutual authentication and a bidirectional key exchange, thereby establishing a secure communication channel. An additional key query callback is provided to identify and retrieve the correct public key based on a received key identifier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kset</td><td>[const] A pointer to the QSMP server signature key used for signing messages. </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function responsible for transmitting messages. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function used to process incoming client data. </td></tr>
    <tr><td class="paramname">key_query</td><td>A pointer to a key-query function that, given a public key identifier, returns the corresponding public key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> representing the outcome of the listener initialization and key exchange. </dd></dl>

</div>
</div>
<a id="a4234204f2e435b03bc24058eb3e0967b" name="a4234204f2e435b03bc24058eb3e0967b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4234204f2e435b03bc24058eb3e0967b">&#9670;&#160;</a></span>qsmp_client_duplex_listen_ipv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_duplex_listen_ipv6 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool(*</td>          <td class="paramname"><span class="paramname"><em>key_query&#160;</em></span>)(uint8_t *rvkey, const uint8_t *pkid)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the server in Duplex mode over IPv6 and listen for a single host-to-host connection. </p>
<p>This function sets up a network listener on the IPv6 interface to accept an incoming connection for the Duplex key exchange protocol. The Duplex protocol enables secure bidirectional communication through mutual authentication and key exchange. A key query callback is provided to determine and return the correct public key based on a given key identifier during the connection process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kset</td><td>[const] A pointer to the QSMP server signature key used for signing messages. </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function that handles outgoing message transmission. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function used to process incoming data from the connected host. </td></tr>
    <tr><td class="paramname">key_query</td><td>A pointer to a key-query function that identifies and returns the appropriate public key for a provided key identifier.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> indicating the status of the listener setup and key exchange operation. </dd></dl>

</div>
</div>
<a id="ab5989e03fa79c662c5b7a9feff38d650" name="ab5989e03fa79c662c5b7a9feff38d650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5989e03fa79c662c5b7a9feff38d650">&#9670;&#160;</a></span>qsmp_client_simplex_connect_ipv4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_simplex_connect_ipv4 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *</td>          <td class="paramname"><span class="paramname"><em>pubk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qsc_ipinfo_ipv4_address *</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a remote server over IPv4 and perform the Simplex key exchange. </p>
<p>This function establishes a connection to a remote server using its IPv4 address and initiates the Simplex key exchange protocol. In the Simplex protocol, the client typically verifies the server's authenticity using its own public signature verification key. The function sets up the connection and employs the specified callback functions for sending and receiving messages.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pubk</td><td>[const] A pointer to the client's public signature verification key. </td></tr>
    <tr><td class="paramname">address</td><td>[const] A pointer to the IPv4 address information structure of the server. </td></tr>
    <tr><td class="paramname">port</td><td>The QSMP application port number (typically defined by QSMP_SERVER_PORT). </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function that manages the message transmission loop. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function that processes incoming data from the server.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> representing the outcome of the connection and key exchange process. </dd></dl>

</div>
</div>
<a id="ad1dceb27d9321c795569dcc5b114f10a" name="ad1dceb27d9321c795569dcc5b114f10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1dceb27d9321c795569dcc5b114f10a">&#9670;&#160;</a></span>qsmp_client_simplex_connect_ipv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_simplex_connect_ipv6 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__client__verification__key.html">qsmp_client_verification_key</a> *</td>          <td class="paramname"><span class="paramname"><em>pubk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qsc_ipinfo_ipv6_address *</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a remote server over IPv6 and perform the Simplex key exchange. </p>
<p>This function establishes a connection to a remote server using its IPv6 address and initiates the Simplex key exchange protocol. It leverages the client's public signature verification key to verify the server's identity. Callback functions are provided to handle the data flow over the established connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pubk</td><td>[const] A pointer to the client's public signature verification key. </td></tr>
    <tr><td class="paramname">address</td><td>[const] A pointer to the IPv6 address information structure of the server. </td></tr>
    <tr><td class="paramname">port</td><td>The QSMP application port number (typically defined by QSMP_SERVER_PORT). </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function responsible for handling outgoing messages. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function that processes incoming server data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> indicating the status of the connection and key exchange. </dd></dl>

</div>
</div>
<a id="ac451d696879717d76829599a9e1cb98e" name="ac451d696879717d76829599a9e1cb98e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac451d696879717d76829599a9e1cb98e">&#9670;&#160;</a></span>qsmp_client_simplex_listen_ipv4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_simplex_listen_ipv4 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the server in Simplex mode over IPv4 and listen for client connections. </p>
<p>This function initiates a network listener on the IPv4 interface to wait for incoming client connections. Upon a client connection, it executes the Simplex key exchange protocol, establishing a secure channel for subsequent communications. The connected socket and QSMP connection state are delivered to the specified callback functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kset</td><td>[const] A pointer to the QSMP server signature key used for signing and authenticating messages. </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function that manages the transmission of messages. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function that processes incoming client data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> representing the result of initializing the listener and key exchange. </dd></dl>

</div>
</div>
<a id="a443dbe43db63e33f4dd514fa5d063e52" name="a443dbe43db63e33f4dd514fa5d063e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a443dbe43db63e33f4dd514fa5d063e52">&#9670;&#160;</a></span>qsmp_client_simplex_listen_ipv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API <a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd">qsmp_errors</a> qsmp_client_simplex_listen_ipv6 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structqsmp__server__signature__key.html">qsmp_server_signature_key</a> *</td>          <td class="paramname"><span class="paramname"><em>kset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>send_func&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>receive_callback&#160;</em></span>)(<a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *, const uint8_t *, size_t)&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the server in Simplex mode over IPv6 and listen for client connections. </p>
<p>This function sets up a network listener on the IPv6 interface to accept incoming client connections. Once a connection is established, the Simplex key exchange protocol is executed to create a secure communication channel. The function utilizes the provided callback functions to handle sending and receiving data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kset</td><td>[const] A pointer to the QSMP server signature key used for message signing and authentication. </td></tr>
    <tr><td class="paramname">send_func</td><td>A pointer to the send callback function responsible for outgoing message management. </td></tr>
    <tr><td class="paramname">receive_callback</td><td>A pointer to the receive callback function that processes data received from clients.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a value of type <code><a class="el" href="qsmp_8h.html#a558f889f6d19c213d49a646d3f733ffd" title="The QSMP error values.">qsmp_errors</a></code> indicating the success or failure of the listener setup and key exchange. </dd></dl>

</div>
</div>
<a id="a3e33326ae871a40836648db31902875d" name="a3e33326ae871a40836648db31902875d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e33326ae871a40836648db31902875d">&#9670;&#160;</a></span>qsmp_duplex_send_symmetric_ratchet_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSMP_EXPORT_API bool qsmp_duplex_send_symmetric_ratchet_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structqsmp__connection__state.html">qsmp_connection_state</a> *</td>          <td class="paramname"><span class="paramname"><em>cns</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a symmetric key-ratchet request to the remote host. </p>
<p>This function initiates a symmetric key ratchet process in an ongoing QSMP session. By periodically updating the symmetric session keys, it maintains forward secrecy and ensures that any compromise of past keys does not affect the security of future communications.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cns</td><td>A pointer to the current QSMP connection state structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the symmetric ratchet request was successfully sent, otherwise false.</dd></dl>
<p>DOXYGEN_IGNORE DOXYGEN_IGNORE </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c25c037fad2e3d3cc638e43d876bf730.html">QSMP</a></li><li class="navelem"><a class="el" href="client_8h.html">client.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>

\doxysection{C\+:/\+Users/stepp/\+Documents/\+Visual Studio 2022/\+Projects/\+C/\+QSMP/\+QSMP/client.h File Reference}
\hypertarget{client_8h}{}\label{client_8h}\index{C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/QSMP/QSMP/client.h@{C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/QSMP/QSMP/client.h}}


QSMP Client Functions.  


{\ttfamily \#include "{}qsmp.\+h"{}}\newline
{\ttfamily \#include "{}../../\+QSC/\+QSC/rcs.\+h"{}}\newline
{\ttfamily \#include "{}../../\+QSC/\+QSC/socketclient.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API bool \mbox{\hyperlink{client_8h_a3e33326ae871a40836648db31902875d}{qsmp\+\_\+duplex\+\_\+send\+\_\+symmetric\+\_\+ratchet\+\_\+request}} (\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}cns)
\begin{DoxyCompactList}\small\item\em Send a symmetric key-\/ratchet request to the remote host. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_ac02e20e6f3a5687fcce9c86cb5e050c6}{qsmp\+\_\+client\+\_\+duplex\+\_\+connect\+\_\+ipv4}} (const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}rverkey, const qsc\+\_\+ipinfo\+\_\+ipv4\+\_\+address \texorpdfstring{$\ast$}{*}address, uint16\+\_\+t port, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t))
\begin{DoxyCompactList}\small\item\em Connect to a remote host over IPv4 and perform the Duplex key exchange. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_a6636b873b7aa9b74a39e809eafc0b9a7}{qsmp\+\_\+client\+\_\+duplex\+\_\+connect\+\_\+ipv6}} (const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}rverkey, const qsc\+\_\+ipinfo\+\_\+ipv6\+\_\+address \texorpdfstring{$\ast$}{*}address, uint16\+\_\+t port, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t))
\begin{DoxyCompactList}\small\item\em Connect to a remote host over IPv6 and perform the Duplex key exchange. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_ab5989e03fa79c662c5b7a9feff38d650}{qsmp\+\_\+client\+\_\+simplex\+\_\+connect\+\_\+ipv4}} (const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}pubk, const qsc\+\_\+ipinfo\+\_\+ipv4\+\_\+address \texorpdfstring{$\ast$}{*}address, uint16\+\_\+t port, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t))
\begin{DoxyCompactList}\small\item\em Connect to a remote server over IPv4 and perform the Simplex key exchange. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_ad1dceb27d9321c795569dcc5b114f10a}{qsmp\+\_\+client\+\_\+simplex\+\_\+connect\+\_\+ipv6}} (const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}pubk, const qsc\+\_\+ipinfo\+\_\+ipv6\+\_\+address \texorpdfstring{$\ast$}{*}address, uint16\+\_\+t port, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t))
\begin{DoxyCompactList}\small\item\em Connect to a remote server over IPv6 and perform the Simplex key exchange. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_ac451d696879717d76829599a9e1cb98e}{qsmp\+\_\+client\+\_\+simplex\+\_\+listen\+\_\+ipv4}} (const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t))
\begin{DoxyCompactList}\small\item\em Start the server in Simplex mode over IPv4 and listen for client connections. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_a443dbe43db63e33f4dd514fa5d063e52}{qsmp\+\_\+client\+\_\+simplex\+\_\+listen\+\_\+ipv6}} (const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t))
\begin{DoxyCompactList}\small\item\em Start the server in Simplex mode over IPv6 and listen for client connections. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_a06d2e98886f6df2779ba132ab1f6516b}{qsmp\+\_\+client\+\_\+duplex\+\_\+listen\+\_\+ipv4}} (const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), bool(\texorpdfstring{$\ast$}{*}key\+\_\+query)(uint8\+\_\+t \texorpdfstring{$\ast$}{*}rvkey, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}pkid))
\begin{DoxyCompactList}\small\item\em Start the server in Duplex mode over IPv4 and listen for a single host-\/to-\/host connection. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{client_8h_a4234204f2e435b03bc24058eb3e0967b}{qsmp\+\_\+client\+\_\+duplex\+\_\+listen\+\_\+ipv6}} (const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, void(\texorpdfstring{$\ast$}{*}send\+\_\+func)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), bool(\texorpdfstring{$\ast$}{*}key\+\_\+query)(uint8\+\_\+t \texorpdfstring{$\ast$}{*}rvkey, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}pkid))
\begin{DoxyCompactList}\small\item\em Start the server in Duplex mode over IPv6 and listen for a single host-\/to-\/host connection. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
QSMP Client Functions. 

This header file defines the client-\/side functions for the Quantum Secure Messaging Protocol (QSMP). QSMP is a post-\/quantum secure messaging protocol that supports both Duplex and Simplex key exchange mechanisms over IPv4 and IPv6 networks. These functions enable QSMP clients to initiate secure connections, perform key exchanges, and manage cryptographic ratchet operations during an active session.

The QSMP client functionality provided in this header includes\+:


\begin{DoxyItemize}
\item {\bfseries{Key Ratchet Requests\+:}}
\begin{DoxyItemize}
\item {\bfseries{Asymmetric Key Ratchet Request\+:}} (conditionally available when QSMP\+\_\+\+ASYMMETRIC\+\_\+\+RATCHET is defined) Initiates an asymmetric key ratchet to update session keys using asymmetric cryptographic operations, thereby enhancing forward secrecy.
\item {\bfseries{Symmetric Key Ratchet Request\+:}} Initiates a symmetric key ratchet that updates the session keys using symmetric operations.
\end{DoxyItemize}
\item {\bfseries{Duplex Key Exchange Connections\+:}}
\begin{DoxyItemize}
\item Establishes secure, bi-\/directional (mutually authenticated) communication channels using the Duplex protocol.
\item Supports connection establishment over both IPv4 and IPv6.
\end{DoxyItemize}
\item {\bfseries{Simplex Key Exchange Connections\+:}}
\begin{DoxyItemize}
\item Establishes unidirectional secure connections (where the client typically verifies the server\textquotesingle{}s identity) using the Simplex protocol.
\item Supports connection establishment over both IPv4 and IPv6.
\end{DoxyItemize}
\item {\bfseries{Listener Functions\+:}}
\begin{DoxyItemize}
\item Functions that start a network listener (acting as a server) to accept incoming connections and perform either the Simplex or Duplex key exchange protocols. In Duplex mode, an additional key query callback is provided to identify the correct public key based on a given identifier.
\end{DoxyItemize}
\end{DoxyItemize}

All connection functions accept callback functions for sending and receiving data over the QSMP connection, and they return a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} to indicate the success or failure of the operation.

\begin{DoxyNote}{Note}
This header file does not include any internal test functions. 
\end{DoxyNote}


\doxysubsection{Function Documentation}
\Hypertarget{client_8h_ac02e20e6f3a5687fcce9c86cb5e050c6}\index{client.h@{client.h}!qsmp\_client\_duplex\_connect\_ipv4@{qsmp\_client\_duplex\_connect\_ipv4}}
\index{qsmp\_client\_duplex\_connect\_ipv4@{qsmp\_client\_duplex\_connect\_ipv4}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_duplex\_connect\_ipv4()}{qsmp\_client\_duplex\_connect\_ipv4()}}
{\footnotesize\ttfamily \label{client_8h_ac02e20e6f3a5687fcce9c86cb5e050c6} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+duplex\+\_\+connect\+\_\+ipv4 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{rverkey}{, }\item[{const qsc\+\_\+ipinfo\+\_\+ipv4\+\_\+address \texorpdfstring{$\ast$}{*}}]{address}{, }\item[{uint16\+\_\+t}]{port}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t)}\end{DoxyParamCaption})}



Connect to a remote host over IPv4 and perform the Duplex key exchange. 

This function establishes a connection to a remote host using its IPv4 address and initiates the Duplex key exchange protocol. The Duplex protocol enables mutual authentication and a bidirectional key exchange, setting up a secure two-\/way communication channel. Upon successful connection, the provided callback functions handle message transmission and reception.


\begin{DoxyParams}{Parameters}
{\em kset} & \mbox{[}const\mbox{]} A pointer to the client\textquotesingle{}s private signature key used for signing messages. \\
\hline
{\em rverkey} & \mbox{[}const\mbox{]} A pointer to the remote client\textquotesingle{}s public signature verification key used for validating signatures. \\
\hline
{\em address} & \mbox{[}const\mbox{]} A pointer to the IPv4 address information structure of the remote server. \\
\hline
{\em port} & The QSMP application port number (typically defined by QSMP\+\_\+\+CLIENT\+\_\+\+PORT). \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function responsible for transmitting messages. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function used to process incoming data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} indicating the success or failure of the connection and key exchange. 
\end{DoxyReturn}
\Hypertarget{client_8h_a6636b873b7aa9b74a39e809eafc0b9a7}\index{client.h@{client.h}!qsmp\_client\_duplex\_connect\_ipv6@{qsmp\_client\_duplex\_connect\_ipv6}}
\index{qsmp\_client\_duplex\_connect\_ipv6@{qsmp\_client\_duplex\_connect\_ipv6}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_duplex\_connect\_ipv6()}{qsmp\_client\_duplex\_connect\_ipv6()}}
{\footnotesize\ttfamily \label{client_8h_a6636b873b7aa9b74a39e809eafc0b9a7} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+duplex\+\_\+connect\+\_\+ipv6 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{rverkey}{, }\item[{const qsc\+\_\+ipinfo\+\_\+ipv6\+\_\+address \texorpdfstring{$\ast$}{*}}]{address}{, }\item[{uint16\+\_\+t}]{port}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t)}\end{DoxyParamCaption})}



Connect to a remote host over IPv6 and perform the Duplex key exchange. 

This function establishes a connection to a remote host using its IPv6 address and initiates the Duplex key exchange protocol. The Duplex protocol provides mutual authentication and secure bidirectional communication. Upon connection, the designated callback functions are invoked to manage the data transmission and reception.


\begin{DoxyParams}{Parameters}
{\em kset} & \mbox{[}const\mbox{]} A pointer to the client\textquotesingle{}s private signature key used for signing messages. \\
\hline
{\em rverkey} & \mbox{[}const\mbox{]} A pointer to the remote client\textquotesingle{}s public signature verification key. \\
\hline
{\em address} & \mbox{[}const\mbox{]} A pointer to the IPv6 address information structure of the remote server. \\
\hline
{\em port} & The QSMP application port number (typically defined by QSMP\+\_\+\+CLIENT\+\_\+\+PORT). \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function responsible for message transmission. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function used to process incoming data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} indicating the result of the connection and key exchange operation. 
\end{DoxyReturn}
\Hypertarget{client_8h_a06d2e98886f6df2779ba132ab1f6516b}\index{client.h@{client.h}!qsmp\_client\_duplex\_listen\_ipv4@{qsmp\_client\_duplex\_listen\_ipv4}}
\index{qsmp\_client\_duplex\_listen\_ipv4@{qsmp\_client\_duplex\_listen\_ipv4}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_duplex\_listen\_ipv4()}{qsmp\_client\_duplex\_listen\_ipv4()}}
{\footnotesize\ttfamily \label{client_8h_a06d2e98886f6df2779ba132ab1f6516b} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+duplex\+\_\+listen\+\_\+ipv4 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), }\item[{bool(\texorpdfstring{$\ast$}{*}}]{key\+\_\+query~}{)(uint8\+\_\+t \texorpdfstring{$\ast$}{*}rvkey, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}pkid)}\end{DoxyParamCaption})}



Start the server in Duplex mode over IPv4 and listen for a single host-\/to-\/host connection. 

This function initiates a network listener on the IPv4 interface to accept an incoming connection for the Duplex key exchange. The Duplex protocol facilitates mutual authentication and a bidirectional key exchange, thereby establishing a secure communication channel. An additional key query callback is provided to identify and retrieve the correct public key based on a received key identifier.


\begin{DoxyParams}{Parameters}
{\em kset} & \mbox{[}const\mbox{]} A pointer to the QSMP server signature key used for signing messages. \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function responsible for transmitting messages. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function used to process incoming client data. \\
\hline
{\em key\+\_\+query} & A pointer to a key-\/query function that, given a public key identifier, returns the corresponding public key.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} representing the outcome of the listener initialization and key exchange. 
\end{DoxyReturn}
\Hypertarget{client_8h_a4234204f2e435b03bc24058eb3e0967b}\index{client.h@{client.h}!qsmp\_client\_duplex\_listen\_ipv6@{qsmp\_client\_duplex\_listen\_ipv6}}
\index{qsmp\_client\_duplex\_listen\_ipv6@{qsmp\_client\_duplex\_listen\_ipv6}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_duplex\_listen\_ipv6()}{qsmp\_client\_duplex\_listen\_ipv6()}}
{\footnotesize\ttfamily \label{client_8h_a4234204f2e435b03bc24058eb3e0967b} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+duplex\+\_\+listen\+\_\+ipv6 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), }\item[{bool(\texorpdfstring{$\ast$}{*}}]{key\+\_\+query~}{)(uint8\+\_\+t \texorpdfstring{$\ast$}{*}rvkey, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}pkid)}\end{DoxyParamCaption})}



Start the server in Duplex mode over IPv6 and listen for a single host-\/to-\/host connection. 

This function sets up a network listener on the IPv6 interface to accept an incoming connection for the Duplex key exchange protocol. The Duplex protocol enables secure bidirectional communication through mutual authentication and key exchange. A key query callback is provided to determine and return the correct public key based on a given key identifier during the connection process.


\begin{DoxyParams}{Parameters}
{\em kset} & \mbox{[}const\mbox{]} A pointer to the QSMP server signature key used for signing messages. \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function that handles outgoing message transmission. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function used to process incoming data from the connected host. \\
\hline
{\em key\+\_\+query} & A pointer to a key-\/query function that identifies and returns the appropriate public key for a provided key identifier.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} indicating the status of the listener setup and key exchange operation. 
\end{DoxyReturn}
\Hypertarget{client_8h_ab5989e03fa79c662c5b7a9feff38d650}\index{client.h@{client.h}!qsmp\_client\_simplex\_connect\_ipv4@{qsmp\_client\_simplex\_connect\_ipv4}}
\index{qsmp\_client\_simplex\_connect\_ipv4@{qsmp\_client\_simplex\_connect\_ipv4}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_simplex\_connect\_ipv4()}{qsmp\_client\_simplex\_connect\_ipv4()}}
{\footnotesize\ttfamily \label{client_8h_ab5989e03fa79c662c5b7a9feff38d650} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+simplex\+\_\+connect\+\_\+ipv4 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{pubk}{, }\item[{const qsc\+\_\+ipinfo\+\_\+ipv4\+\_\+address \texorpdfstring{$\ast$}{*}}]{address}{, }\item[{uint16\+\_\+t}]{port}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t)}\end{DoxyParamCaption})}



Connect to a remote server over IPv4 and perform the Simplex key exchange. 

This function establishes a connection to a remote server using its IPv4 address and initiates the Simplex key exchange protocol. In the Simplex protocol, the client typically verifies the server\textquotesingle{}s authenticity using its own public signature verification key. The function sets up the connection and employs the specified callback functions for sending and receiving messages.


\begin{DoxyParams}{Parameters}
{\em pubk} & \mbox{[}const\mbox{]} A pointer to the client\textquotesingle{}s public signature verification key. \\
\hline
{\em address} & \mbox{[}const\mbox{]} A pointer to the IPv4 address information structure of the server. \\
\hline
{\em port} & The QSMP application port number (typically defined by QSMP\+\_\+\+SERVER\+\_\+\+PORT). \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function that manages the message transmission loop. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function that processes incoming data from the server.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} representing the outcome of the connection and key exchange process. 
\end{DoxyReturn}
\Hypertarget{client_8h_ad1dceb27d9321c795569dcc5b114f10a}\index{client.h@{client.h}!qsmp\_client\_simplex\_connect\_ipv6@{qsmp\_client\_simplex\_connect\_ipv6}}
\index{qsmp\_client\_simplex\_connect\_ipv6@{qsmp\_client\_simplex\_connect\_ipv6}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_simplex\_connect\_ipv6()}{qsmp\_client\_simplex\_connect\_ipv6()}}
{\footnotesize\ttfamily \label{client_8h_ad1dceb27d9321c795569dcc5b114f10a} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+simplex\+\_\+connect\+\_\+ipv6 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__client__verification__key}{qsmp\+\_\+client\+\_\+verification\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{pubk}{, }\item[{const qsc\+\_\+ipinfo\+\_\+ipv6\+\_\+address \texorpdfstring{$\ast$}{*}}]{address}{, }\item[{uint16\+\_\+t}]{port}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t)}\end{DoxyParamCaption})}



Connect to a remote server over IPv6 and perform the Simplex key exchange. 

This function establishes a connection to a remote server using its IPv6 address and initiates the Simplex key exchange protocol. It leverages the client\textquotesingle{}s public signature verification key to verify the server\textquotesingle{}s identity. Callback functions are provided to handle the data flow over the established connection.


\begin{DoxyParams}{Parameters}
{\em pubk} & \mbox{[}const\mbox{]} A pointer to the client\textquotesingle{}s public signature verification key. \\
\hline
{\em address} & \mbox{[}const\mbox{]} A pointer to the IPv6 address information structure of the server. \\
\hline
{\em port} & The QSMP application port number (typically defined by QSMP\+\_\+\+SERVER\+\_\+\+PORT). \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function responsible for handling outgoing messages. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function that processes incoming server data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} indicating the status of the connection and key exchange. 
\end{DoxyReturn}
\Hypertarget{client_8h_ac451d696879717d76829599a9e1cb98e}\index{client.h@{client.h}!qsmp\_client\_simplex\_listen\_ipv4@{qsmp\_client\_simplex\_listen\_ipv4}}
\index{qsmp\_client\_simplex\_listen\_ipv4@{qsmp\_client\_simplex\_listen\_ipv4}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_simplex\_listen\_ipv4()}{qsmp\_client\_simplex\_listen\_ipv4()}}
{\footnotesize\ttfamily \label{client_8h_ac451d696879717d76829599a9e1cb98e} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+simplex\+\_\+listen\+\_\+ipv4 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t)}\end{DoxyParamCaption})}



Start the server in Simplex mode over IPv4 and listen for client connections. 

This function initiates a network listener on the IPv4 interface to wait for incoming client connections. Upon a client connection, it executes the Simplex key exchange protocol, establishing a secure channel for subsequent communications. The connected socket and QSMP connection state are delivered to the specified callback functions.


\begin{DoxyParams}{Parameters}
{\em kset} & \mbox{[}const\mbox{]} A pointer to the QSMP server signature key used for signing and authenticating messages. \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function that manages the transmission of messages. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function that processes incoming client data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} representing the result of initializing the listener and key exchange. 
\end{DoxyReturn}
\Hypertarget{client_8h_a443dbe43db63e33f4dd514fa5d063e52}\index{client.h@{client.h}!qsmp\_client\_simplex\_listen\_ipv6@{qsmp\_client\_simplex\_listen\_ipv6}}
\index{qsmp\_client\_simplex\_listen\_ipv6@{qsmp\_client\_simplex\_listen\_ipv6}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_client\_simplex\_listen\_ipv6()}{qsmp\_client\_simplex\_listen\_ipv6()}}
{\footnotesize\ttfamily \label{client_8h_a443dbe43db63e33f4dd514fa5d063e52} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+client\+\_\+simplex\+\_\+listen\+\_\+ipv6 (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{send\+\_\+func~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}), }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t)}\end{DoxyParamCaption})}



Start the server in Simplex mode over IPv6 and listen for client connections. 

This function sets up a network listener on the IPv6 interface to accept incoming client connections. Once a connection is established, the Simplex key exchange protocol is executed to create a secure communication channel. The function utilizes the provided callback functions to handle sending and receiving data.


\begin{DoxyParams}{Parameters}
{\em kset} & \mbox{[}const\mbox{]} A pointer to the QSMP server signature key used for message signing and authentication. \\
\hline
{\em send\+\_\+func} & A pointer to the send callback function responsible for outgoing message management. \\
\hline
{\em receive\+\_\+callback} & A pointer to the receive callback function that processes data received from clients.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a value of type {\ttfamily \doxylink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} indicating the success or failure of the listener setup and key exchange. 
\end{DoxyReturn}
\Hypertarget{client_8h_a3e33326ae871a40836648db31902875d}\index{client.h@{client.h}!qsmp\_duplex\_send\_symmetric\_ratchet\_request@{qsmp\_duplex\_send\_symmetric\_ratchet\_request}}
\index{qsmp\_duplex\_send\_symmetric\_ratchet\_request@{qsmp\_duplex\_send\_symmetric\_ratchet\_request}!client.h@{client.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_duplex\_send\_symmetric\_ratchet\_request()}{qsmp\_duplex\_send\_symmetric\_ratchet\_request()}}
{\footnotesize\ttfamily \label{client_8h_a3e33326ae871a40836648db31902875d} 
QSMP\+\_\+\+EXPORT\+\_\+\+API bool qsmp\+\_\+duplex\+\_\+send\+\_\+symmetric\+\_\+ratchet\+\_\+request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}}]{cns}{}\end{DoxyParamCaption})}



Send a symmetric key-\/ratchet request to the remote host. 

This function initiates a symmetric key ratchet process in an ongoing QSMP session. By periodically updating the symmetric session keys, it maintains forward secrecy and ensures that any compromise of past keys does not affect the security of future communications.


\begin{DoxyParams}{Parameters}
{\em cns} & A pointer to the current QSMP connection state structure.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns true if the symmetric ratchet request was successfully sent, otherwise false.
\end{DoxyReturn}
DOXYGEN\+\_\+\+IGNORE DOXYGEN\+\_\+\+IGNORE 
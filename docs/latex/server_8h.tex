\doxysection{C\+:/\+Users/stepp/\+Documents/\+Visual Studio 2022/\+Projects/\+C/\+QSMP/\+QSMP/server.h File Reference}
\hypertarget{server_8h}{}\label{server_8h}\index{C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/QSMP/QSMP/server.h@{C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/QSMP/QSMP/server.h}}


QSMP Server functions.  


{\ttfamily \#include "{}qsmp.\+h"{}}\newline
{\ttfamily \#include "{}../../\+QSC/\+QSC/rcs.\+h"{}}\newline
{\ttfamily \#include "{}../../\+QSC/\+QSC/socketserver.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{server_8h_a1c917236984d53085480f3feed380d2c}{QSMP\+\_\+\+SERVER\+\_\+\+PAUSE\+\_\+\+INTERVAL}}~100
\begin{DoxyCompactList}\small\item\em The pause interval used by the server pause function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API void \mbox{\hyperlink{server_8h_abc91de3735de0dd7533239d8ca5ff844}{qsmp\+\_\+server\+\_\+broadcast}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}message, size\+\_\+t msglen)
\begin{DoxyCompactList}\small\item\em Broadcast a message to all connected hosts. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API void \mbox{\hyperlink{server_8h_a300ff9410ccb72fd9733d262ff647e36}{qsmp\+\_\+server\+\_\+pause}} (void)
\begin{DoxyCompactList}\small\item\em Pause the server. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API void \mbox{\hyperlink{server_8h_aee4028fe4c50e92d29282df8b5079a7f}{qsmp\+\_\+server\+\_\+quit}} (void)
\begin{DoxyCompactList}\small\item\em Quit the server. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API void \mbox{\hyperlink{server_8h_a14dc3f40667db595a07d419da696c55d}{qsmp\+\_\+server\+\_\+resume}} (void)
\begin{DoxyCompactList}\small\item\em Resume the server listener. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{server_8h_a8e986cf714c5489b31182d0894902827}{qsmp\+\_\+server\+\_\+start\+\_\+ipv4}} (qsc\+\_\+socket \texorpdfstring{$\ast$}{*}source, const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), void(\texorpdfstring{$\ast$}{*}disconnect\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}))
\begin{DoxyCompactList}\small\item\em Start the IPv4 multi-\/threaded server. \end{DoxyCompactList}\item 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} \mbox{\hyperlink{server_8h_a4b1c9dce9b1ecd503785ba6f440e1f8f}{qsmp\+\_\+server\+\_\+start\+\_\+ipv6}} (qsc\+\_\+socket \texorpdfstring{$\ast$}{*}source, const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}kset, void(\texorpdfstring{$\ast$}{*}receive\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), void(\texorpdfstring{$\ast$}{*}disconnect\+\_\+callback)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}))
\begin{DoxyCompactList}\small\item\em Start the IPv6 multi-\/threaded server. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
QSMP Server functions. 

This header declares the functions used to implement the server component of the Quantum Secure Messaging Protocol (QSMP). The server functions manage client connections, broadcast messages, and control the server lifecycle through operations such as pausing, resuming, and quitting. QSMP employs a multi-\/threaded server design that supports both IPv4 and IPv6 connections.

The functions provided in this header include\+:
\begin{DoxyItemize}
\item Broadcasting a message to all connected hosts.
\item Pausing the server to suspend acceptance of new connections.
\item Quitting the server by closing all active connections.
\item Resuming the server listener from a paused state.
\item Starting the multi-\/threaded server on IPv4 and IPv6 interfaces with support for callback functions to process incoming data and handle disconnect events.
\end{DoxyItemize}

\begin{DoxyNote}{Note}
QSMP\+\_\+\+EXPORT\+\_\+\+API is used to ensure proper symbol visibility. 
\end{DoxyNote}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{server_8h_a1c917236984d53085480f3feed380d2c}\index{server.h@{server.h}!QSMP\_SERVER\_PAUSE\_INTERVAL@{QSMP\_SERVER\_PAUSE\_INTERVAL}}
\index{QSMP\_SERVER\_PAUSE\_INTERVAL@{QSMP\_SERVER\_PAUSE\_INTERVAL}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{QSMP\_SERVER\_PAUSE\_INTERVAL}{QSMP\_SERVER\_PAUSE\_INTERVAL}}
{\footnotesize\ttfamily \label{server_8h_a1c917236984d53085480f3feed380d2c} 
\#define QSMP\+\_\+\+SERVER\+\_\+\+PAUSE\+\_\+\+INTERVAL~100}



The pause interval used by the server pause function. 

This macro defines the time interval (in milliseconds) that the server will pause before resuming operations or processing new connection requests. 

\doxysubsection{Function Documentation}
\Hypertarget{server_8h_abc91de3735de0dd7533239d8ca5ff844}\index{server.h@{server.h}!qsmp\_server\_broadcast@{qsmp\_server\_broadcast}}
\index{qsmp\_server\_broadcast@{qsmp\_server\_broadcast}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_server\_broadcast()}{qsmp\_server\_broadcast()}}
{\footnotesize\ttfamily \label{server_8h_abc91de3735de0dd7533239d8ca5ff844} 
QSMP\+\_\+\+EXPORT\+\_\+\+API void qsmp\+\_\+server\+\_\+broadcast (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{message}{, }\item[{size\+\_\+t}]{msglen}{}\end{DoxyParamCaption})}



Broadcast a message to all connected hosts. 

This function iterates over all active connections managed by the server and transmits the specified message to each connected host. It is useful for disseminating announcements or control messages across the network.


\begin{DoxyParams}{Parameters}
{\em message} & \mbox{[}const\mbox{]} A pointer to the message data to be broadcast. \\
\hline
{\em msglen} & The length (in bytes) of the message.\\
\hline
\end{DoxyParams}
DOXYGEN\+\_\+\+IGNORE DOXYGEN\+\_\+\+IGNORE \Hypertarget{server_8h_a300ff9410ccb72fd9733d262ff647e36}\index{server.h@{server.h}!qsmp\_server\_pause@{qsmp\_server\_pause}}
\index{qsmp\_server\_pause@{qsmp\_server\_pause}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_server\_pause()}{qsmp\_server\_pause()}}
{\footnotesize\ttfamily \label{server_8h_a300ff9410ccb72fd9733d262ff647e36} 
QSMP\+\_\+\+EXPORT\+\_\+\+API void qsmp\+\_\+server\+\_\+pause (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Pause the server. 

This function temporarily suspends the acceptance of new client connections. While paused, the server continues to service existing connections but does not allow any new joins until it is resumed. \Hypertarget{server_8h_aee4028fe4c50e92d29282df8b5079a7f}\index{server.h@{server.h}!qsmp\_server\_quit@{qsmp\_server\_quit}}
\index{qsmp\_server\_quit@{qsmp\_server\_quit}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_server\_quit()}{qsmp\_server\_quit()}}
{\footnotesize\ttfamily \label{server_8h_aee4028fe4c50e92d29282df8b5079a7f} 
QSMP\+\_\+\+EXPORT\+\_\+\+API void qsmp\+\_\+server\+\_\+quit (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Quit the server. 

This function gracefully shuts down the server by closing all active client connections and terminating the server\textquotesingle{}s listener. It is used to perform a complete shutdown of the server operations. \Hypertarget{server_8h_a14dc3f40667db595a07d419da696c55d}\index{server.h@{server.h}!qsmp\_server\_resume@{qsmp\_server\_resume}}
\index{qsmp\_server\_resume@{qsmp\_server\_resume}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_server\_resume()}{qsmp\_server\_resume()}}
{\footnotesize\ttfamily \label{server_8h_a14dc3f40667db595a07d419da696c55d} 
QSMP\+\_\+\+EXPORT\+\_\+\+API void qsmp\+\_\+server\+\_\+resume (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Resume the server listener. 

This function resumes the server\textquotesingle{}s listener functionality after it has been paused. Once resumed, the server will once again accept new incoming client connections. \Hypertarget{server_8h_a8e986cf714c5489b31182d0894902827}\index{server.h@{server.h}!qsmp\_server\_start\_ipv4@{qsmp\_server\_start\_ipv4}}
\index{qsmp\_server\_start\_ipv4@{qsmp\_server\_start\_ipv4}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_server\_start\_ipv4()}{qsmp\_server\_start\_ipv4()}}
{\footnotesize\ttfamily \label{server_8h_a8e986cf714c5489b31182d0894902827} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+server\+\_\+start\+\_\+ipv4 (\begin{DoxyParamCaption}\item[{qsc\+\_\+socket \texorpdfstring{$\ast$}{*}}]{source}{, }\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), }\item[{void(\texorpdfstring{$\ast$}{*}}]{disconnect\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*})}\end{DoxyParamCaption})}



Start the IPv4 multi-\/threaded server. 

This function initializes and starts the QSMP server for IPv4 connections using a multi-\/threaded architecture. It listens on the provided socket and uses the specified QSMP private key for secure key exchange and authentication. Two callback functions are provided\+:
\begin{DoxyItemize}
\item A receive callback to process incoming client data streams.
\item A disconnect callback to handle cleanup and resource deallocation when a client disconnects.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em source} & A pointer to the listener socket used by the server. \\
\hline
{\em kset} & \mbox{[}const\mbox{]} A pointer to the QSMP server private signature key used for key exchange. \\
\hline
{\em receive\+\_\+callback} & A pointer to the function that processes incoming client data. \\
\hline
{\em disconnect\+\_\+callback} & A pointer to the function that handles client disconnect events.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a QSMP error code indicating the success or failure of starting the IPv4 server. 
\end{DoxyReturn}
\Hypertarget{server_8h_a4b1c9dce9b1ecd503785ba6f440e1f8f}\index{server.h@{server.h}!qsmp\_server\_start\_ipv6@{qsmp\_server\_start\_ipv6}}
\index{qsmp\_server\_start\_ipv6@{qsmp\_server\_start\_ipv6}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{qsmp\_server\_start\_ipv6()}{qsmp\_server\_start\_ipv6()}}
{\footnotesize\ttfamily \label{server_8h_a4b1c9dce9b1ecd503785ba6f440e1f8f} 
QSMP\+\_\+\+EXPORT\+\_\+\+API \mbox{\hyperlink{qsmp_8h_a558f889f6d19c213d49a646d3f733ffd}{qsmp\+\_\+errors}} qsmp\+\_\+server\+\_\+start\+\_\+ipv6 (\begin{DoxyParamCaption}\item[{qsc\+\_\+socket \texorpdfstring{$\ast$}{*}}]{source}{, }\item[{const \mbox{\hyperlink{structqsmp__server__signature__key}{qsmp\+\_\+server\+\_\+signature\+\_\+key}} \texorpdfstring{$\ast$}{*}}]{kset}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{receive\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*}, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}, size\+\_\+t), }\item[{void(\texorpdfstring{$\ast$}{*}}]{disconnect\+\_\+callback~}{)(\mbox{\hyperlink{structqsmp__connection__state}{qsmp\+\_\+connection\+\_\+state}} \texorpdfstring{$\ast$}{*})}\end{DoxyParamCaption})}



Start the IPv6 multi-\/threaded server. 

This function initializes and starts the QSMP server for IPv6 connections using a multi-\/threaded design. It listens on the provided IPv6 socket and employs the specified QSMP private key for secure communications. The server uses two callback functions to process incoming client data and handle disconnect events.


\begin{DoxyParams}{Parameters}
{\em source} & A pointer to the listener socket used by the server. \\
\hline
{\em kset} & \mbox{[}const\mbox{]} A pointer to the QSMP server private signature key used for key exchange and authentication. \\
\hline
{\em receive\+\_\+callback} & A pointer to the function that processes incoming client data. \\
\hline
{\em disconnect\+\_\+callback} & A pointer to the function that handles client disconnect events.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a QSMP error code indicating the outcome of starting the IPv6 server. 
\end{DoxyReturn}
